<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoosyCozy 2nd Beta Mission</title>
    <link rel="stylesheet" href="beta.css">
</head>
<body>

    <header class="beta-header">
        <div class="header-logo">ROOSYCOZY BETA-TESTER</div>
        <div class="progress-container">
            <div id="progress-bar" class="progress-bar" style="width: 20%;"></div>
        </div>
    </header>

    <div id="step-1" class="mission-card active">
        <div class="step-badge">STEP 01</div>
        <h2 class="mission-title">실행까지 가는 길</h2>
        <p class="mission-desc">
            이탈 없이 한 번에 성공해 봅시다.<br>
            아래 순서대로 진행해 주세요.
        </p>

        <a href="roosycozy-portable-exe.zip" download class="btn-action" onclick="trackDownload()">
            📥 RoosyCozy 베타 다운로드
        </a>

        <div class="guide-box">
            <div class="guide-row"><span class="num-circle">1</span><div class="guide-text"><h4>파일 확인</h4><p>파일은 <b>[내 PC > 다운로드]</b> 폴더에 저장됩니다.</p></div></div>
            <div class="guide-row"><span class="num-circle">2</span><div class="guide-text"><h4>압축 풀고 실행</h4><p>반드시 <b>압축을 푼 뒤 폴더 안에서</b> 실행해 주세요.</p></div></div>
            <div class="guide-row"><span class="num-circle">3</span><div class="guide-text"><h4>경고창 무시 (중요!)</h4><p>'서명되지 않은 앱' 경고는 정상이니 <b>[추가 정보] -> [실행]</b>을 눌러주세요.</p></div></div>
        </div>

        <div class="warning-area">
            <h4 class="warning-header">📑 윈도우에서 'PC 보호' 창이 떴나요?</h4>
            <div class="warning-img-flex">
                <div class="w-img-item"><img src="warning_win_1.png" alt="PC 보호 경고창"><span class="w-caption">1단계: 추가 정보 클릭</span></div>
                <div class="w-img-item"><img src="warning_win_2.png" alt="실행 버튼 화면"><span class="w-caption">2단계: 실행 클릭</span></div>
            </div>
        </div>

        <div id="mission-box-1" class="check-mission-box" onclick="toggleCheck(1)">
            <div class="mission-info">
                <strong>🖥️ 앱 메인 화면이 떴나요?</strong>
                <div style="font-size:0.85rem; color:#888;">화면이 보이면 여기를 클릭해 주세요.</div>
            </div>
            <div class="check-circle">✔</div>
        </div>

        <button id="btn-next-1" class="btn-next" onclick="nextStep(2)" disabled>
            다음 미션으로 이동 →
        </button>
    </div>


    <div id="step-2" class="mission-card">
        <div class="step-badge">STEP 02</div>
        <h2 class="mission-title">이제 직접 남겨봅시다</h2>
        <p class="mission-desc">
            설치가 무사히 완료되었군요!<br>
            이제 <b>3초 만에 기록이 끝나는 경험</b>을 해보세요.
        </p>

        <div style="background: #f0fdf4; border: 1px dashed #4caf50; border-radius: 12px; padding: 20px; text-align: left; margin-top: 25px; margin-bottom: 30px; box-shadow: 0 4px 12px rgba(76, 175, 80, 0.1);">
            <h4 style="margin: 0 0 15px 0; font-size: 1.05rem; color: #2e7d32; font-weight: 800;">
                💡 로지코지 AI를 100% 부려먹는 메모 3계명
            </h4>
            <ul style="margin: 0; padding-left: 20px; color: #1b5e20; font-size: 0.95rem; line-height: 1.6;">
                <li style="margin-bottom: 12px;"><b>관련자의 마법:</b> 원인이 된 학생(예: 학생1)을 꼭 추가하세요. 나중에 학생1만 검색해도 다 끌어옵니다.</li>
                <li style="margin-bottom: 12px;"><b>키워드의 마법:</b> 일기처럼 쓰지 말고 <b>'언쟁'</b>, <b>'민원'</b> 같은 뼈대 단어를 꼭 넣어주세요.</li>
                <li><b>건조하게 쪼개서:</b> 시간대별로 팩트만 짧게 저장하세요. 예쁘게 모으는 건 AI가 해줍니다.</li>
            </ul>
        </div>
        
        <button class="btn-action" onclick="showStep2Detail()">
            🚀 기록 시작하기
        </button>

        <p style="margin-top: 20px; font-size: 0.9rem; color: #999;">
            위 버튼을 누르면 상세 가이드가 나타납니다.
        </p>
    </div>


    <div id="step-2-detail" class="mission-card">
        <div class="step-badge">STEP 02</div> 
        <h2 class="mission-title">직접 기록해보기</h2>
        <p class="mission-desc" style="margin-bottom: 20px;">
            가장 기본이 되는 기능입니다.<br>
            아까 읽어본 꿀팁을 기억하며, 아래의 <b>모범 예시</b>를 똑같이 세팅해 보세요.
        </p>

        <div style="background: #fff8e1; border: 1px solid #ffca28; border-radius: 12px; padding: 20px; text-align: left; margin-bottom: 30px;">
            <h4 style="margin: 0 0 10px 0; font-size: 1rem; color: #f57f17; font-weight: 800;">
                📋 [실전 연습] 이렇게 똑같이 세팅해 보세요!
            </h4>
            <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: #555;">
                사건의 발단이 되는 상황입니다. 아래 옵션을 설정하고 내용을 복사해서 넣어보세요. 나중에 이 기록이 어떻게 마법처럼 묶이는지 보게 됩니다.
            </p>
            <div style="background: #fff; border: 1px solid #ffe082; padding: 15px; border-radius: 8px; font-size: 0.95rem; color: #333;">
                <div style="margin-bottom: 8px;">
                    <strong>👤 주체:</strong> 학생 ➔ <b>'학생1'</b> 선택 
                </div>
                <div style="margin-bottom: 8px;">
                    <strong>📍 장소:</strong> <b>'교실'</b> 선택 
                </div>
                <div style="margin-bottom: 8px;">
                    <strong>📁 보관:</strong> <b>'학급일지'</b> 선택 
                </div>
                <div><strong>📝 내용 (복사하세요):</strong><br>
                    <div style="margin-top: 5px; padding: 12px; background: #fafafa; border-radius: 6px; border: 1px solid #eee; font-family: 'Malgun Gothic', sans-serif; line-height: 1.5; color: #000;">
                        2교시 수업 중 학생1이 수행평가 결과에 불만을 품고 큰 소리를 냄. 진정시킴.
                    </div>
                </div>
            </div>
        </div>

        <div id="part-2-1">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">1. 입력 후 저장하기</h3>
            <div class="zoom-container">
                <img src="메모하기1.png" alt="입력 화면 예시">
            </div>
            <div id="mission-box-2-1" class="check-mission-box" onclick="togglePart(2, 1)">
                <div class="mission-info">
                    <strong>⌨️ 입력을 마치고 저장했나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">저장했다면 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-2-2" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">2. 내 메모 확인하기</h3>
            <div class="zoom-container">
                <img src="메모하기2.png" alt="결과 확인">
            </div>
            <div id="mission-box-2-2" class="check-mission-box" onclick="togglePart(2, 2)">
                <div class="mission-info">
                    <strong>👀 리스트에 추가된 걸 확인했나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">확인했다면 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-2-3" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">3. 📌 [추가 미션] 같은 방식으로 2개 더 남겨보기</h3>
            <p style="color: #555; font-size: 0.95rem; margin-bottom: 20px;">
                첫 번째 기록을 완료하셨습니다. 나중에 AI가 <b>주체가 다른 기록들을 어떻게 하나의 사건으로 묶어내는지</b> 확인하기 위해, 이어지는 두 가지 상황도 마저 입력해 보세요.<br>
                <!-- <span style="font-size: 0.85rem; color: #888;">(※ 바로 다음 미션으로 넘어가도 무방합니다.)</span> -->
            </p>

            <div style="background: #fff8e1; border: 1px solid #ffca28; border-radius: 12px; padding: 20px; text-align: left; margin-bottom: 20px;">
                <h4 style="margin: 0 0 10px 0; font-size: 1rem; color: #f57f17; font-weight: 800;">
                    [메모 A: 학부모 전화 항의]
                </h4>
                <div style="background: #fff; border: 1px solid #ffe082; padding: 15px; border-radius: 8px; font-size: 0.95rem; color: #333;">
                    <div style="margin-bottom: 8px;"><strong>👤 주체:</strong> 학부모 ➔ <b>'1번 모'</b> 선택 <span style="font-size:0.8rem; color:#888; margin-left:5px;">(누구의 부모님인지 정확히!)</span></div>
                    <div style="margin-bottom: 8px;"><strong>📍 장소:</strong> <b>'교무실'</b> 선택</div>
                    <div style="margin-bottom: 8px;"><strong>📁 보관:</strong> <b>'전화'</b> 선택</div>
                    <div style="margin-bottom: 8px;"><strong>👥 관련자 추가:</strong> 학생 ➔ <b>'학생1'</b> 추가 <span style="font-size:0.8rem; color:#d32f2f; font-weight:bold;">(★가장 중요!)</span></div>
                    <div><strong>📝 내용 (복사하세요):</strong><br>
                        <div style="margin-top: 5px; padding: 12px; background: #fafafa; border-radius: 6px; border: 1px solid #eee; font-family: 'Malgun Gothic', sans-serif; line-height: 1.5; color: #000;">
                            수행평가 결과 관련 학부모 전화 옴. 기준이 편파적이라며 강하게 항의(민원). 내일 교육청에 전화하겠다고 언성 높임.
                        </div>
                    </div>
                </div>
            </div>

            <div style="background: #fff8e1; border: 1px solid #ffca28; border-radius: 12px; padding: 20px; text-align: left; margin-bottom: 20px;">
                <h4 style="margin: 0 0 10px 0; font-size: 1rem; color: #f57f17; font-weight: 800;">
                    [메모 B: 관리자 보고]
                </h4>
                <div style="background: #fff; border: 1px solid #ffe082; padding: 15px; border-radius: 8px; font-size: 0.95rem; color: #333;">
                    <div style="margin-bottom: 8px;"><strong>👤 주체:</strong> 관리자 ➔ <b>'교감'</b> 선택</div>
                    <div style="margin-bottom: 8px;"><strong>📍 장소:</strong> <b>'교무실'</b> 선택</div>
                    <div style="margin-bottom: 8px;"><strong>📁 보관:</strong> <b>'업무일지'</b> 선택</div>
                    <div style="margin-bottom: 8px;"><strong>👥 관련자 추가:</strong> 학생 ➔ <b>'학생1'</b> 추가 <span style="font-size:0.8rem; color:#d32f2f; font-weight:bold;">(★가장 중요!)</span></div>
                    <div><strong>📝 내용 (복사하세요):</strong><br>
                        <div style="margin-top: 5px; padding: 12px; background: #fafafa; border-radius: 6px; border: 1px solid #eee; font-family: 'Malgun Gothic', sans-serif; line-height: 1.5; color: #000;">
                            학생1 수행평가 관련 학부모 민원 제기 건 교감선생님께 보고드림.
                        </div>
                    </div>
                </div>
            </div>

            <div id="mission-box-2-3" class="check-mission-box" onclick="togglePart(2, 3)">
                <div class="mission-info">
                    <strong>☑️ 추가 메모까지 모두 입력했나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">입력했다면 클릭해주세요. </div>
                </div>
                <div class="check-circle">✔</div>
            </div>

            <button id="btn-next-2" class="btn-next" onclick="nextStep(3)" style="display: none; margin-top: 20px;">
                다음 미션(AI 스마트 메모)으로 이동 →
            </button>
        </div>
    </div>


    <div id="step-3" class="mission-card">
        <div class="step-badge">STEP 03</div>
        <h2 class="mission-title">흩어진 기록을 한 곳으로</h2>
        <p class="mission-desc" style="margin-bottom: 30px;">
            메모가 아무리 많아도 걱정 없습니다.<br>
            <strong>'스마트 메모 모으기'</strong>가 AI처럼 관련 기록을 찰떡같이 묶어줍니다.
        </p>

        <div id="part-3-1">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">1. 기능 실행하기</h3>
            <p style="color: #666; font-size: 0.95rem; margin-bottom: 15px;">
                상단 메뉴에서 <b>[2. 메모 묶음 보기]</b> 탭으로 이동 후,<br>
                화면에 보이는 <strong>[✨ 스마트 모으기]</strong> 버튼(빨간 박스 중 아무거나)을 클릭하세요.
            </p>
            <div class="zoom-container">
                <img src="스마트 모으기 1.png" alt="스마트 모으기 버튼 클릭">
            </div>
            <div id="mission-box-3-1" class="check-mission-box" onclick="togglePart(3, 1)">
                <div class="mission-info">
                    <strong>👆 모으기 창을 띄우셨나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">창이 떴다면 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-3-2" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 10px; color: #444; font-weight: 700;">2. AI에게 단서 주기 (★마법의 순간)</h3>
            
            <p style="color: #444; margin-bottom: 12px; font-weight: 600; font-size: 0.9rem; letter-spacing: -0.5px; word-break: keep-all;">
                👇 방금 입력한 3개의 기록을 한 번에 불러옵니다. 아래 정답지처럼 딱 2가지만 입력해 보세요!
            </p>

            <div style="background: #e3f2fd; border: 1px solid #90caf9; border-radius: 12px; padding: 15px; text-align: left; margin-bottom: 15px;">
                <h4 style="margin: 0 0 10px 0; font-size: 1rem; color: #1565c0; font-weight: 800;">
                    🎯 [정답지] 이렇게 세팅하고 모아보세요!
                </h4>
                <div style="background: #fff; border: 1px solid #bbdefb; padding: 12px; border-radius: 8px; font-size: 0.9rem; color: #333;">
                    
                    <div style="margin-bottom: 10px;">
                        <strong style="color:#1976d2;">① 누구의 기록을 모을까요? (필수)</strong><br>
                        ➔ <b>[학생] - [학생1]</b> 선택 후 <b>[추가]</b> 버튼 꾹!<br>
                        <div style="background:#f0f7ff; border-left: 3px solid #1976d2; padding:6px 10px; margin-top:4px; font-size:0.85rem; color:#444;">
                            💡 <b>AI의 마법:</b> '학생1'만 골라도 AI가 학부모/교감 기록 등 곁가지 기록까지 싹 다 추적해 옵니다.
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <strong style="color:#1976d2;">② 어떤 사건인가요? (요약/키워드)</strong><br>
                        ➔ <b>수행평가 민원</b> (이라고만 치세요)<br>
                        <div style="background:#f0f7ff; border-left: 3px solid #1976d2; padding:6px 10px; margin-top:4px; font-size:0.85rem; color:#444;">
                            💡 <b>AI의 마법:</b> 메모에 넣었던 핵심 단어들이 강력한 자석이 되어 흩어진 퍼즐을 쫙 맞춰줍니다.
                        </div>
                    </div>

                    <div>
                        <strong style="color:#1976d2;">③ 옵션 (제목 설정)</strong><br>
                        ➔ <b>'옵션: 기간 및 제목 직접 설정'</b>을 클릭해서 창을 여세요.<br>
                        ➔ 제목에 <b>학생1 수행평가 민원 대응</b> 적고 <b>[메모 모으기 시작]</b> 클릭!
                    </div>

                </div>
            </div>

            <div class="zoom-container" style="margin-bottom: 15px;">
                <img src="스마트 모으기 2.png" alt="조건 입력 화면">
            </div>
            
            <div id="mission-box-3-2" class="check-mission-box" onclick="togglePart(3, 2)">
                <div class="mission-info">
                    <strong>✍️ 정답지대로 세팅하고 모으기 시작을 눌렀나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">세팅을 마쳤다면 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-3-3" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">3. 생성 완료!</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 0.95rem;">
                짜잔! <strong>교실 소란, 학부모 전화, 교감 보고</strong>라는 3개의 흩어진 기록이<br>
                시간 순서대로 완벽하게 하나의 사건으로 묶였습니다.
            </p>

            <div style="background: #fff8e1; border-left: 4px solid #f57f17; padding: 12px 15px; margin-bottom: 15px; border-radius: 0 8px 8px 0; font-size: 0.9rem; color: #555;">
                👇 <b>확인 꿀팁:</b> 왼쪽의 타임라인 영역을 <b>아래로 스크롤(마우스 휠 굴리기)</b> 해보세요! 오전에 있었던 교실 소란부터 교감선생님 보고까지 3개의 기록이 모두 엮여있는 모습을 확인하실 수 있습니다.
            </div>

            <div class="zoom-container" style="margin-bottom: 15px;">
                <img src="스마트 모으기 3.png" alt="결과 화면">
            </div>
            
            <div id="mission-box-3-3" class="check-mission-box" onclick="togglePart(3, 3)">
                <div class="mission-info">
                    <strong>🎉 스크롤을 내려서 3개의 메모가 묶인 걸 모두 확인했나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">확인했다면 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
            
            <button id="btn-next-3" class="btn-next" onclick="nextStep(4)" style="display: none; margin-top: 20px;">
                마지막 미션(증빙 출력)으로 이동 →
            </button>
        </div>
    </div>

    <div id="step-4" class="mission-card">
        <div class="step-badge">STEP 04</div>
        <h2 class="mission-title">증빙자료 출력</h2>
        <p class="mission-desc" style="margin-bottom: 30px;">
            로지코지의 핵심은 <b>'선생님의 안전'</b>입니다.<br>
            모아둔 기록을 클릭 한 번에 공문서 수준의 <b>사건 보고서(PDF)</b>로 출력해 보세요.
        </p>

        <div id="part-4-1">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">1. 출력할 묶음 선택하기</h3>
            <p style="color: #666; font-size: 0.95rem; margin-bottom: 15px;">
                상단 메뉴에서 <b>[3. 증빙자료 출력]</b> 탭으로 이동하세요.<br>
                화면 가운데에 뜨는 우리가 방금 만든 <strong>'학생1 수행평가 민원 대응'</strong> 묶음을 클릭해 줍니다.
            </p>
            <div class="zoom-container" style="margin-bottom: 15px;">
                <img src="증빙자료 출력 1.png" alt="출력할 묶음 선택">
            </div>
            <div id="mission-box-4-1" class="check-mission-box" onclick="togglePart(4, 1)">
                <div class="mission-info">
                    <strong>🖨️ 출력할 메모 묶음을 클릭하셨나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">선택했다면 체크해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-4-2" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">2. PDF로 저장하기</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 0.95rem;">
                사건의 경위와 로그가 깔끔하게 정리된 보고서 미리보기가 나타납니다.<br>
                우측 상단의 <strong>[PDF로 저장]</strong> 녹색 버튼을 클릭하세요!
            </p>
            <div class="zoom-container" style="margin-bottom: 15px;">
                <img src="증빙자료 출력 2.png" alt="PDF 저장 버튼 클릭">
            </div>
            <div id="mission-box-4-2" class="check-mission-box" onclick="togglePart(4, 2)">
                <div class="mission-info">
                    <strong>💾 PDF로 저장을 완료하셨나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">저장했다면 체크해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>
        </div>

        <div id="part-4-3" style="display: none; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: #444; font-weight: 700;">3. 최종 보고서 확인</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 0.95rem;">
                저장된 <strong>사건 보고서 PDF 파일</strong>을 열어보세요.<br>
                이 문서 하나면 어떠한 소명 요구에도 완벽하게 대처할 수 있습니다.
            </p>
            <div class="zoom-container" style="margin-bottom: 15px;">
                <img src="증빙자료 출력 3.png" alt="최종 PDF 파일 확인">
            </div>
            <div id="mission-box-4-3" class="check-mission-box" onclick="togglePart(4, 3)">
                <div class="mission-info">
                    <strong>🎉 최종 PDF 파일까지 모두 확인하셨나요?</strong>
                    <div style="font-size:0.85rem; color:#888;">수고하셨습니다! 클릭해주세요.</div>
                </div>
                <div class="check-circle">✔</div>
            </div>

            <button id="btn-next-4" class="btn-action" onclick="showCustomModal()" style="display: none; margin-top: 40px; width: 100%;">
                🏆 모든 미션 완료! (수고하셨습니다)
            </button>
        </div>

        <div id="final-modal-overlay" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div style="font-size: 4rem; margin-bottom: 10px;">🛡️</div>
                <h2 style="font-size: 1.6rem; font-weight: 900; color: #00C853; margin-bottom: 15px;">모든 미션 클리어!</h2>
                <p style="color: #555; font-size: 1.05rem; line-height: 1.6; margin-bottom: 25px;">
                    로지코지 2차 베타 테스트를<br>완벽하게 마치셨습니다.<br><br>
                    귀중한 시간을 내어 참여해 주셔서<br>진심으로 감사드립니다.<br><br>
                    <b>선생님의 가장 든든한 방패가 되겠습니다.</b>
                </p>
                <button class="btn-action" onclick="closeModalAndGoHome()" style="padding: 15px; font-size: 1.1rem; border-radius: 10px;">
                    처음 화면으로 돌아가기
                </button>
            </div>
        </div>
        
        <div id="step-final" class="mission-card" style="display: none; text-align: center; padding: 60px 40px;">
            <div style="font-size: 5rem; margin-bottom: 20px;">🛡️</div>
            <h2 style="font-size: 1.8rem; font-weight: 900; color: #00C853; margin-bottom: 15px;">완벽하게 클리어하셨습니다!</h2>
        
            <div style="background: #f8fbf9; border: 1px solid #00E676; border-radius: 15px; padding: 30px; margin-top: 30px; margin-bottom: 30px; text-align: center;">
                <p style="color: #444; font-size: 1.05rem; line-height: 1.7; margin: 0;">
                    로지코지 2차 베타 테스트의 모든 미션을 무사히 마치셨습니다.<br><br>
                    현장에서 아이들을 지도하시느라 바쁘신 와중에도,<br>
                    기꺼이 귀중한 시간을 내어 참여해 주셔서 진심으로 감사드립니다.<br><br>
                    <b>선생님의 가장 든든하고 안전한 방패가 되겠습니다.</b>
                </p>
            </div>

            <a href="index.html" style="color: #999; text-decoration: underline; font-size: 0.95rem; transition: 0.3s;" onmouseover="this.style.color='#666'" onmouseout="this.style.color='#999'">
                처음 화면으로 돌아가기
            </a>
        </div>

    </div>


    <script>
        // 1. 구글 스프레드시트 URL
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzlGdBouqHmaHJzY1qP9VNaB_G0CJomirBvniezApbDPk-9HdNajTmeiqVvG78veTzw/exec';

        // 2. 사용자 ID 생성
        function getUserId() {
            let userId = localStorage.getItem('roosy_user_id');
            if (!userId) {
                const randomStr = Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 6);
                userId = 'user_' + randomStr;
                localStorage.setItem('roosy_user_id', userId);
            }
            return userId;
        }

        // 3. 다운로드 카운팅
        function trackDownload() {
            const userId = getUserId();       
            const action = "DOWNLOAD_ACTION"; 
            const version = "beta_v2";        
            const finalUrl = `${SCRIPT_URL}?id=${userId}&action=${action}&version=${version}&t=${new Date().getTime()}`;

            fetch(finalUrl, { method: 'GET', mode: 'no-cors' })
            .then(() => console.log("기록 완료"))
            .catch(err => console.error("기록 실패", err));
        }

        // 4. 다음 단계 이동
        function nextStep(nextNum) {
            document.querySelector('.mission-card.active').classList.remove('active');
            document.getElementById('step-' + nextNum).classList.add('active');
            
            let progress = nextNum * 20; 
            document.getElementById('progress-bar').style.width = progress + '%';
            window.scrollTo(0, 0);
        }

        // 5. 체크박스 토글 (STEP 1 용)
        function toggleCheck(stepNum) {
            const box = document.getElementById('mission-box-' + stepNum);
            const btn = document.getElementById('btn-next-' + stepNum);
            
            box.classList.toggle('checked');

            if(box.classList.contains('checked')) {
                btn.classList.add('active');
                btn.disabled = false;
            } else {
                btn.classList.remove('active');
                btn.disabled = true;
            }
        }
        
        // 6. STEP 02 인트로 -> 상세 미션 전환
        function showStep2Detail() {
            document.getElementById('step-2').classList.remove('active'); 
            document.getElementById('step-2-detail').classList.add('active');
    
            document.getElementById('progress-bar').style.width = '40%';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 7. 파트별 토글 (자동으로 다음 파트를 찾아 여는 스마트 버전)
        function togglePart(stepNum, partNum) {
            const box = document.getElementById(`mission-box-${stepNum}-${partNum}`);
            box.classList.toggle('checked');
            
            if(box.classList.contains('checked')) {
                const nextPart = document.getElementById(`part-${stepNum}-${partNum + 1}`);
                if(nextPart) {
                    nextPart.style.display = 'block';
                    nextPart.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    const nextBtn = document.getElementById(`btn-next-${stepNum}`);
                    if(nextBtn) {
                        nextBtn.style.display = 'block';
                        nextBtn.classList.add('active');
                        nextBtn.disabled = false;
                        nextBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }
        }

        // 8. 최종 엔딩 화면 보여주기
        function showFinalScreen() {
            // 현재 활성화된 카드(STEP 4) 숨기기
            document.querySelector('.mission-card.active').classList.remove('active');
            
            // 엔딩 카드 띄우기
            const finalStep = document.getElementById('step-final');
            finalStep.style.display = 'block';
            
            // CSS 애니메이션을 위해 아주 약간의 시차를 둠
            setTimeout(() => {
                finalStep.classList.add('active');
            }, 10);
            
            // 프로그레스 바 100% 채우기
            document.getElementById('progress-bar').style.width = '100%';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 8. 예쁜 커스텀 팝업 띄우기
        function showCustomModal() {
            document.getElementById('final-modal-overlay').style.display = 'flex';
        }

        // 9. 팝업 닫고 처음 화면(index)으로 돌아가기
        function closeModalAndGoHome() {
            window.location.href = 'index.html';
        }

    </script>
</body>
</html>